Zookeper + ZooKeeper Farmer - A configuration File Implementation
================


This project is an example to make a simple configuration manager using [Apache ZooKeeper](http://zookeeper.apache.org/) and ZooKeeper Farmer (https://github.com/rs/zkfarmer). 

According to ZkFarmer's project,  ZkFarmer is a set of tools to easily manage distributed server farms using [Apache ZooKeeper](http://zookeeper.apache.org/). 

Here we are focuzing in using the Zk to easily integrate and maintain always upgraded files inside the project.

Connecting to Zookeeper
-----------------------

The project contains five main folders, in which 2 of them is simply the git clone of ZkFarmer and the wget of [Apache ZooKeeper](http://zookeeper.apache.org/). The other 2 folders I am using to make the syncronization of the files after the hole installation. Basically the structure follows:
    - configuration: This folder will contain a file structure with the files that we want Zookeeper to store and stream to the clients. 
    - consumer: This folder will be the client using the ZkFarmer to sync the main configuration file that we want to keep track.


Putting the ZooKeeper UP
-----------------------

All the command that I will be using are based in a development under Ubuntu/Linux.


To get the ZooKeeper Up, bassically run this command from inside ZooKeeper's main project :

    $ bin/zkServer.sh start

And then, if you want to keep track with what's going on inside the ZooKeeper project, ypu can get inside the server with:
    
    $ bin/zkCli.sh -server 127.0.0.1:2181

A detail: on the zoo.cfg we set a dataDir, this folder will store information generated by the ZooKeeper, since I have a plan to use this simple concept in a dockerized envoriment, I thik is a good ideia to make a mounted folder inside your server to hold the location of this dataDir, besides ZooKeeper is ephemeral, so using the mount have low risks to lose yout data.

Using ZkFarmer
--------------

ZkFarmer will help us to sync the two folders configuration and consumer. On configuration with have a simple structure of Properties files created by a simple:

    $ echo 'configuratioFile' > configuration/setEnv1

And a json created by an echo too.

After putting the server up you can start the syncronization of the configuration file with: 

    $ zkfarmer join /services/conf configutation/

Now in the prompt that you use the zkCli.sh, you can check the join with:

    $ ls /service/conf

    and 

    $ get /service/conf/[YOURIP]